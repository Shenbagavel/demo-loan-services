package com.shen.demo.services.loan.process;

import java.io.PrintWriter;
import java.io.StringWriter;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.UUID;
import java.math.*;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.http.HttpStatus;

import com.shen.demo.services.loan.model.LoanAccModel;

@Component
public class LoanInterestProcessor{

  public LoanAccModel calculateAmount(LoanAccModel loanAccDto){
	try{
		LoanAccModel loanAccModelResp = new LoanAccModel();
		
		loanAccModelResp = loanAccDto;
		
		BigDecimal intAmount = BigDecimal.ONE;
		BigDecimal intPercentage = BigDecimal.ONE;
//intPercentage = loanAccDto.getInterestRate() / 100;
		BigDecimal divDays = new BigDecimal("100");
		intPercentage = loanAccDto.getInterestRate().divide(divDays, 3, RoundingMode.CEILING);
		
		BigDecimal dayPercentage = BigDecimal.ONE;
		//dayPercentage = loanAccDto.getTenor()/365;
		BigDecimal daysYear = new BigDecimal("365");
		
		dayPercentage = BigDecimal.valueOf(loanAccDto.getNoOfTenor()).divide(daysYear, 3, RoundingMode.CEILING);
		
		//intAmount = loanAccDto.getLoanAmount() * intPercentage * dayPercentage;
		
		//intAmount = new BigDecimal(loanAccDto.getLoanAmount()).multiply(intPercentage);
		intAmount = BigDecimal.valueOf(loanAccDto.getLoanAmount()).multiply(intPercentage);
		
		intAmount = intAmount.multiply(dayPercentage);
		
		BigDecimal totalpayable = BigDecimal.ONE;
		//totalpayable = loanAccDto.getLoanAmount() + intAmount;
		
		totalpayable = new BigDecimal(loanAccDto.getLoanAmount()).add(intAmount);
		
		loanAccModelResp.setInterestAmount(intAmount);
		loanAccModelResp.setTotalPayableAmount(totalpayable);
		
		
	}catch(Exception ex){
	 ex.printStackTrace();

	}
	return loanAccModelResp;
}


}